[gd_scene load_steps=15 format=3 uid="uid://c2vrh4sptnu32"]

[ext_resource type="PackedScene" uid="uid://dco8of3a1dx4v" path="res://3D/tile_cornerSquare.glb" id="1_glyyv"]
[ext_resource type="PackedScene" uid="uid://d2y4g8nd32kjh" path="res://3D/tile_endSpawn.glb" id="2_bieg0"]
[ext_resource type="PackedScene" uid="uid://db2tnw8pnu7yl" path="res://3D/tile_straight.glb" id="3_8buwl"]
[ext_resource type="Script" path="res://Scripts/EnemySpawn.cs" id="4_t1qvh"]
[ext_resource type="PackedScene" uid="uid://o64ll6y5xc3o" path="res://Prefabs/enemy.tscn" id="5_kmxfw"]
[ext_resource type="Script" path="res://Scripts/Input.cs" id="6_m8tle"]
[ext_resource type="PackedScene" uid="uid://0njne00qcypp" path="res://Prefabs/tower.tscn" id="7_mr3dc"]
[ext_resource type="PackedScene" uid="uid://cggqb75a8w8r" path="res://addons/debug_menu/debug_menu.tscn" id="8_c3voc"]

[sub_resource type="Environment" id="Environment_canif"]
ambient_light_energy = 0.1
tonemap_mode = 1

[sub_resource type="NavigationMesh" id="NavigationMesh_jrn58"]
vertices = PackedVector3Array(0.397046, 1.49891, 0.597245, 0.597047, 1.49891, 0.597245, 0.697047, 1.49891, -1.30275, 0.297047, 1.49891, -1.40276, 1.19705, 0.498906, -1.20275, 0.797046, 0.498906, -1.20275, 0.797046, 0.498906, 0.697245, 1.19705, 0.498906, 1.19725, -1.20295, 0.498906, 1.19725, -0.802954, 0.498906, 1.19725, -0.702954, 0.498906, -0.802755, -1.20295, 0.498906, -1.20275, 1.19705, 0.498906, 1.19725, 0.797046, 0.498906, 0.697245, 0.297047, 0.498906, 0.797245, -0.202953, 0.498906, 1.19725, -0.702954, 0.498906, -0.802755, -0.202953, 0.498906, -0.702755, 0.197047, 0.498906, -1.20275, -1.20295, 0.498906, -1.20275, -0.202953, 0.498906, -0.702755, -0.202953, 0.498906, 1.19725, 0.297047, 0.498906, 0.797245, 0.197047, 0.498906, -1.20275, -0.702954, 1.49891, 1.29724, -0.302953, 1.49891, 1.39725, -0.402954, 1.49891, -0.602755, -0.602953, 1.49891, -0.602755)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(5, 4, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(9, 8, 10), PackedInt32Array(10, 8, 11), PackedInt32Array(13, 12, 14), PackedInt32Array(14, 12, 15), PackedInt32Array(17, 16, 18), PackedInt32Array(18, 16, 19), PackedInt32Array(21, 20, 22), PackedInt32Array(22, 20, 23), PackedInt32Array(27, 26, 24), PackedInt32Array(24, 26, 25)]
geometry_parsed_geometry_type = 1
cell_size = 0.1
agent_radius = 0.1
agent_max_climb = 0.0
agent_max_slope = 30.0

[sub_resource type="BoxShape3D" id="BoxShape3D_r6k12"]
size = Vector3(3, 0.103232, 3)

[sub_resource type="BoxShape3D" id="BoxShape3D_e1vql"]
size = Vector3(0.125607, 1, 3.00551)

[sub_resource type="BoxShape3D" id="BoxShape3D_rfegi"]
size = Vector3(2.01182, 1, 0.252521)

[sub_resource type="BoxShape3D" id="BoxShape3D_2egyu"]
size = Vector3(3.01509, 0.200299, 3.01172)

[node name="Game" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_canif")

[node name="DirectionalLight" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -0.415297, 0.909686, 0, -0.909686, -0.415297, 0, 0, 0)

[node name="Camera" type="Camera3D" parent="."]
transform = Transform3D(0.580703, 0.539449, -0.609737, 0, 0.748956, 0.66262, 0.814116, -0.384785, 0.434921, -1.555, 1.77, 0.97)
projection = 1
current = true
size = 3.0

[node name="Map" type="Node3D" parent="."]

[node name="NavMesh" type="NavigationRegion3D" parent="Map"]
navigation_mesh = SubResource("NavigationMesh_jrn58")

[node name="Physics" type="StaticBody3D" parent="Map/NavMesh"]
collision_mask = 0

[node name="Ground" type="CollisionShape3D" parent="Map/NavMesh/Physics"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0505218, 0)
shape = SubResource("BoxShape3D_r6k12")

[node name="Wall1" type="CollisionShape3D" parent="Map/NavMesh/Physics"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.44015, 0.601932, 0)
shape = SubResource("BoxShape3D_e1vql")

[node name="Wall2" type="CollisionShape3D" parent="Map/NavMesh/Physics"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -3.00481e-10, 0.601932, -1.43671)
shape = SubResource("BoxShape3D_e1vql")

[node name="Wall3" type="CollisionShape3D" parent="Map/NavMesh/Physics"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.44015, 0.601932, 0)
shape = SubResource("BoxShape3D_e1vql")

[node name="Wall4" type="CollisionShape3D" parent="Map/NavMesh/Physics"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -6.2951e-08, 0.601932, 1.44015)
shape = SubResource("BoxShape3D_e1vql")

[node name="Wall5" type="CollisionShape3D" parent="Map/NavMesh/Physics"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -0.498382, 0.601932, 0.374646)
shape = SubResource("BoxShape3D_rfegi")

[node name="Wall6" type="CollisionShape3D" parent="Map/NavMesh/Physics"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 0.498382, 0.601932, -0.378083)
shape = SubResource("BoxShape3D_rfegi")

[node name="Visuals" type="Node3D" parent="Map"]

[node name="tile_cornerSquare" parent="Map/Visuals" instance=ExtResource("1_glyyv")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, -1, 0, -1)

[node name="tile_endSpawn" parent="Map/Visuals" instance=ExtResource("2_bieg0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 0, 1)

[node name="tile_straight" parent="Map/Visuals" instance=ExtResource("3_8buwl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 0, 0)

[node name="tile_cornerSquare2" parent="Map/Visuals" instance=ExtResource("1_glyyv")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0, 0, -1)

[node name="tile_cornerSquare3" parent="Map/Visuals" instance=ExtResource("1_glyyv")]
transform = Transform3D(1, 0, 1.74846e-07, 0, 1, 0, -1.74846e-07, 0, 1, 1, 0, 1)

[node name="tile_cornerSquare4" parent="Map/Visuals" instance=ExtResource("1_glyyv")]
transform = Transform3D(1.31134e-07, 0, -1, 0, 1, 0, 1, 0, 1.31134e-07, 0, 0, 1)

[node name="tile_endSpawn2" parent="Map/Visuals" instance=ExtResource("2_bieg0")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 1, 0, -1)

[node name="tile_straight2" parent="Map/Visuals" instance=ExtResource("3_8buwl")]

[node name="tile_straight3" parent="Map/Visuals" instance=ExtResource("3_8buwl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0)

[node name="MouseTarget" type="StaticBody3D" parent="Map"]
collision_layer = 4
collision_mask = 0

[node name="Ground" type="CollisionShape3D" parent="Map/MouseTarget"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.103367, 0)
shape = SubResource("BoxShape3D_2egyu")

[node name="EnemySpawn" type="Node3D" parent="." node_paths=PackedStringArray("enemyTarget")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 0.3, 1)
script = ExtResource("4_t1qvh")
enemyPrefab = ExtResource("5_kmxfw")
enemyTarget = NodePath("../EnemyEnd")

[node name="Timer" type="Timer" parent="EnemySpawn"]
autostart = true

[node name="EnemyEnd" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0.3, -1)

[node name="Input" type="Node" parent="."]
script = ExtResource("6_m8tle")
towerPrefab = ExtResource("7_mr3dc")

[connection signal="timeout" from="EnemySpawn/Timer" to="EnemySpawn" method="TimerTick"]
